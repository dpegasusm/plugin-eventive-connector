(()=>{function e(e){return null==e?"":String(e).toLowerCase()}function t(e){return null==e?"":String(e)}function n(e){return e?String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}function i(e){if(!e)return"#000";let t=e.replace("#","");return 3===t.length&&(t=t.split("").map(e=>e+e).join("")),(299*(parseInt(t.substr(0,2),16)||0)+587*(parseInt(t.substr(2,2),16)||0)+114*(parseInt(t.substr(4,2),16)||0))/1e3>128?"#000":"#fff"}function a(e){const t=(e||"").toString().toLowerCase();return"poster"===t||"poster-image"===t||"poster_image"===t?"poster_image":"cover"===t||"cover-image"===t||"cover_image"===t?"cover_image":"still"===t||"still-image"===t||"still_image"===t?"still_image":t}function r(e,t){try{const n=new URL(window.location.href);e?n.searchParams.set("tag-id",e):n.searchParams.delete("tag-id"),"replace"===t?history.replaceState({},"",n.toString()):history.pushState({},"",n.toString())}catch(e){}}function o(e){const t=new Set,n=new Set;return(e||[]).forEach(function(e){if(null==e)return;const i=String(e).trim();i&&(t.add(i),n.add(i.toLowerCase()))}),{ids:t,names:n}}function l(e,t,n,i){const a=e.tags||[];if(!a.length)return!1;const r=i?String(i).trim().toLowerCase():null;for(let e=0;e<a.length;e++){const o=a[e],l=o&&null!=o.id?String(o.id):"",c=o&&null!=o.name?String(o.name).toLowerCase():"";if((!r||l===i||c===r)&&(t.has(l)||n.has(c)))return!0}return!1}function c(c){if(!c||c.__efgInited)return;c.__efgInited=!0,c.id||(c.id="efg-"+Math.random().toString(36).slice(2));const s=window.EventiveBlockData?.eventBucket||"",d=window.EventiveBlockData?.filmSyncEnabled||!1,u=window.EventiveBlockData?.prettyPermalinks||!1,f=window.EventiveBlockData?.filmDetailUrl||"";let m=[];try{m=(c.getAttribute("data-tag-name")||"").split(",").map(e=>e.trim()).filter(Boolean)}catch(e){}let g=[];try{g=(c.getAttribute("data-exclude-tag")||"").split(",").map(e=>e.trim()).filter(Boolean)}catch(e){}const v=c.getAttribute("data-film-id")||"";let p=c.getAttribute("data-image")||"poster";p=a(p);let w=c.getAttribute("data-view")||"grid";const h="true"===c.getAttribute("data-show-events"),y="true"===c.getAttribute("data-show-details"),E="true"===c.getAttribute("data-show-description"),b="true"===c.getAttribute("data-show-tags"),S="true"===c.getAttribute("data-year-round"),L="true"===c.getAttribute("data-search"),_="true"===c.getAttribute("data-show-filter"),A="true"===c.getAttribute("data-show-view-switcher");let C=c.querySelector(".eventive-film-guide-tags-filter");_&&!C&&(C=document.createElement("div"),C.className="eventive-film-guide-tags-filter",c.insertBefore(C,c.firstChild));let q=c.querySelector(".eventive-film-guide-search");if(L&&!q){q=document.createElement("div"),q.className="eventive-film-guide-search";const e=document.createElement("input");e.type="search",e.placeholder="Search films (title, cast, crew)â€¦",e.className="eventive-search-input",q.appendChild(e),C?C.after(q):c.insertBefore(q,c.firstChild)}let k=c.querySelector(".eventive-film-guide-controls");A&&!k&&(k=document.createElement("div"),k.className="eventive-film-guide-controls",k.innerHTML=`\n\t\t\t<label>\n\t\t\t\tView:\n\t\t\t\t<select class="view-selector">\n\t\t\t\t\t<option value="grid" ${"grid"===w?"selected":""}>Grid</option>\n\t\t\t\t\t<option value="list" ${"list"===w?"selected":""}>List</option>\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\tImage:\n\t\t\t\t<select class="image-selector">\n\t\t\t\t\t<option value="poster_image" ${"poster_image"===p?"selected":""}>Poster</option>\n\t\t\t\t\t<option value="cover_image" ${"cover_image"===p?"selected":""}>Cover</option>\n\t\t\t\t\t<option value="still_image" ${"still_image"===p?"selected":""}>Still</option>\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t`,q?q.after(k):C?C.after(k):c.insertBefore(k,c.firstChild));let M=c.querySelector(".eventive-film-guide-container");M||(M=document.createElement("div"),M.className="eventive-film-guide-container",c.appendChild(M));const D=M.querySelector(".eventive-film-loading-text");D&&D.remove();let N=M.querySelector(".catalog-film-container.grid"),T=M.querySelector(".catalog-film-container.list");N||(N=document.createElement("div"),N.className="catalog-film-container grid",M.appendChild(N)),T||(T=document.createElement("div"),T.className="catalog-film-container list",M.appendChild(T)),N.style.display="grid"===w?"grid":"none",T.style.display="list"===w?"block":"none";let j=new URLSearchParams(window.location.search).get("tag-id")||"",F="",z=[];const I=o(m),P=o(g);let B=!1;function H(){B||(B=!0,requestAnimationFrame(function(){B=!1,function(){let e=z.slice();if(v&&(e=e.filter(function(e){return String(e.id)===String(v)})),v||!I.ids.size&&!I.names.size||(e=e.filter(function(e){return l(e,I.ids,I.names)})),!v&&j){const t=String(j).trim();e=e.filter(function(e){return l(e,new Set([t]),new Set([t.toLowerCase()]))})}(P.ids.size||P.names.size)&&(e=e.filter(function(e){return!l(e,P.ids,P.names)})),F&&(e=e.filter(function(e){return e._lc_name.indexOf(F)>-1||e._lc_desc.indexOf(F)>-1||e._lc_credits.indexOf(F)>-1})),e.sort(function(e,t){const n=(e.name||"").toLowerCase(),i=(t.name||"").toLowerCase();return n<i?-1:n>i?1:0});const r="list"===w?T||N:N||T;if(!r)return;if(!e.length)return void(r.innerHTML='<div class="catalog-no-films">No films found for the selected criteria.</div>');r.innerHTML="";let o=0;requestAnimationFrame(function l(){const c=document.createDocumentFragment(),s=Math.min(o+20,e.length);for(;o<s;o++){const r=e[o],l=y?r.details&&r.details.runtime||"N/A":null,s=y?r.credits&&r.credits.director||"Unknown":null,m=y?r.details&&r.details.year||"N/A":null,g=y?r.details&&r.details.language||"N/A":null,v=r[a(p)]||r[p]||"default-placeholder.jpg",S=r.short_description||"",L=n(r.name);let _="";_=d?t(f).replace(/\/$/,"")+"/"+L:u?f+"?film-id="+encodeURIComponent(r.id):f+"&film-id="+encodeURIComponent(r.id);let A="";const C=Array.isArray(r.tags)?r.tags:[];if(b&&C&&C.length){const e=new Map;C.forEach(function(t){if(!t)return;const n=null!=t.id?String(t.id):"",i=t.name||t.title||n;i&&e.set(n||i,t)}),A='<div class="catalog-film-tags">'+Array.from(e.values()).map(function(e){const n=i(e.color||"#e0e0e0");return'<span class="catalog-film-tag-pill" style="background-color:'+t(e.color||"#e0e0e0")+";color:"+n+'" data-tag-id="'+t(e.id||e.name)+'">'+t(e.name)+"</span>"}).join("")+"</div>"}const q=document.createElement("div");"list"===w?(q.className="catalog-film-list-item",q.innerHTML='<a href="'+_+'"><img class="catalog-film-image" loading="lazy" decoding="async" src="'+v+'" alt="'+(r.name||"Film")+'"/></a><div class="catalog-film-details"><h2 class="catalog-film-title">'+(r.name||"")+"</h2>"+A+'<span class="catalog-film-description">'+(y?"Directed by: "+s+"<br />"+l+" min | "+m+" | "+g:"")+"</span>"+(E&&S?'<div class="catalog-film-short">'+S+"</div>":"")+(h?'<div class="catalog-film-details-link"><a href="'+_+'">Details & Showtimes</a></div>':"")+"</div>"):(q.className="catalog-film-box",q.setAttribute("role","article"),q.innerHTML='<a href="'+_+'"><img class="catalog-film-image" loading="lazy" decoding="async" src="'+v+'" alt="'+(r.name||"Film")+'"/></a><div class="catalog-film-details"><h3 class="catalog-film-title">'+(r.name||"")+"</h3>"+A+(y?'<span class="catalog-film-description">'+s+"<br />"+l+" min | "+m+" | "+g+"</span>":"")+(E&&S?'<div class="catalog-film-short">'+S+"</div>":"")+(h?'<div class="catalog-film-details-link"><a href="'+_+'">Details & Showtimes</a></div>':"")+"</div>"),c.appendChild(q)}r.appendChild(c),o<e.length&&requestAnimationFrame(l)})}()}))}if(k){const e=k.querySelector(".view-selector"),t=k.querySelector(".image-selector");e&&e.addEventListener("change",function(e){w=e.target.value,N.style.display="grid"===w?"grid":"none",T.style.display="list"===w?"block":"none",H()}),t&&t.addEventListener("change",function(e){p=a(e.target.value),H()})}if(q){const e=q.querySelector(".eventive-search-input");if(e){const t=function(e){let t;return function(){const n=arguments,i=this;clearTimeout(t),t=setTimeout(function(){e.apply(i,n)},150)}}(function(){F=(e.value||"").trim().toLowerCase(),H()});e.addEventListener("input",t),e.addEventListener("change",t),e.addEventListener("keydown",function(e){"Enter"===e.key&&(e.preventDefault(),t())})}}function U(){if(C)try{const e=C.querySelectorAll(".eventive-tag-btn");e.forEach(function(e){e.classList.remove("active")}),e.forEach(function(e){const t=e.getAttribute("data-tag-id");j?t===j&&e.classList.add("active"):t||e.classList.add("active")})}catch(e){}}function O(){if(!window.Eventive){const e="list"===w?T:N;return void(e&&(e.innerHTML='<div class="catalog-error">Eventive API is not available.</div>'))}const n=function(){(function(e,t){const n=e+"::"+(t?"marquee":"all"),i=window.__Eventive_FilmCache;if(i[n])return Promise.resolve(i[n]);if(!window.Eventive)return Promise.reject(new Error("Eventive not ready"));const a={method:"GET",path:"event_buckets/"+encodeURIComponent(e)+"/films",qs:{include:"tags"},authenticatePerson:!1};return t&&(a.qs.marquee=!0),window.Eventive.request(a).then(function(e){const t=e&&e.films||[];return i[n]=t,t})})(s,S).then(function(n){z=function(t){return(t||[]).map(function(t){if(!t)return t;const n=String(t.description||t.short_description||"");let i="";if(t.credits&&"object"==typeof t.credits)try{i=Object.values(t.credits).flat().join(" ")}catch(e){i=Object.values(t.credits).join(" ")}return Object.assign({},t,{_lc_name:e(t.name),_lc_desc:e(n),_lc_credits:e(i)})})}(n),function(e){if(!C)return;let n=e.slice();v||!I.ids.size&&!I.names.size||(n=n.filter(function(e){return l(e,I.ids,I.names)})),(P.ids.size||P.names.size)&&(n=n.filter(function(e){return!l(e,P.ids,P.names)}));const a=function(e){const t=new Map;return(e||[]).forEach(function(e){(Array.isArray(e.tags)?e.tags:[]).forEach(function(e){if(!e)return;const n=null!=e.id?String(e.id):"",i=e.name||e.title||e.label||(n?"#"+n:"");if(!n&&!i)return;const a=t.get(n||i)||{id:n,name:i,color:e.color||"#e0e0e0",count:0};a.count+=1,t.set(n||i,a)})}),Array.from(t.values())}(n);if(!a.length)return void(C.innerHTML="");!function(){try{const e=new URL(window.location.href);return e.searchParams.delete("tag-id"),e.toString()}catch(e){return"#"}}();let r="";r+='<div class="eventive-tags-list">',r+='<button class="eventive-tag-btn" data-tag-id="">All</button>',a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}),r+=a.map(function(e){const n=i(e.color||"#e0e0e0");return'<button class="eventive-tag-btn" style="background-color:'+t(e.color||"#e0e0e0")+";color:"+n+'" data-tag-id="'+t(e.id||e.name)+'">'+t(e.name)+"</button>"}).join(""),r+="</div>",C.innerHTML=r,U()}(z),H()}).catch(function(){const e="list"===w?T:N;e&&(e.innerHTML='<div class="catalog-error">Failed to load films.</div>')})};let a=!1;try{window.Eventive&&"function"==typeof window.Eventive.ready&&(window.Eventive.ready(n),a=!0)}catch(e){}if(!a)try{window.Eventive&&window.Eventive.on&&"function"==typeof window.Eventive.on&&(window.Eventive.on("ready",n),a=!0)}catch(e){}if(!a){let e=0;!function t(){window.Eventive&&"function"==typeof window.Eventive.request||++e>60?n():setTimeout(t,50)}()}}document.addEventListener("eventive:setActiveTag",function(e){try{const t=e&&e.detail&&(void 0!==e.detail.tagId?e.detail.tagId:e.detail);if(void 0===t)return;j=String(t||""),r(j,"replace"),U(),H()}catch(e){}}),C&&C.addEventListener("click",function(e){const t=e.target&&e.target.closest?e.target.closest(".eventive-tag-btn"):null;if(!t)return;e.preventDefault(),e.stopPropagation();const n=t.getAttribute("data-tag-id")||"";j=String(n),r(j,"replace"),U(),H()},!0),window.addEventListener("popstate",function(){try{const e=new URL(window.location.href).searchParams.get("tag-id")||"";j=e,U(),H()}catch(e){}}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",O,{once:!0}):O()}function s(){const e=document.querySelectorAll(".wp-block-eventive-film-guide");e&&e.length&&e.forEach(function(e){if(!e.getAttribute)return;const t=e.parentElement&&e.parentElement.closest&&e.parentElement.closest(".wp-block-eventive-film-guide");t&&t!==e||c(e)})}window.__Eventive_FilmCache=window.__Eventive_FilmCache||{},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s,{once:!0}):s(),window.jQuery&&window.elementorFrontend&&window.jQuery(window).on("elementor/frontend/init",function(){try{window.elementorFrontend.hooks.addAction("frontend/element_ready/shortcode.default",function(e){if(e&&e[0]){const t=e[0].querySelectorAll(".wp-block-eventive-film-guide");t&&t.length&&t.forEach(c)}})}catch(e){}})})();