(()=>{"use strict";var t={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return t.d(i,{a:i}),i},d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.apiFetch;var i=t.n(e);document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-film-showtimes").forEach(t=>{const e=window.EventiveBlockData?.postId;if(!e)return void(t.innerHTML='<div class="eventive-error">This block requires it be placed on a Eventive Film post type.</div>');t.innerHTML='<div class="eventive-loading">Loading showtimes...</div>';const n=()=>{i()({path:`/wp/v2/eventive_film/${e}`}).then(e=>{const i=e.meta?._eventive_film_id,n=e.meta?._eventive_bucket_id||window.EventiveBlockData?.eventBucket||"";i&&n?window.Eventive.request({method:"GET",path:`event_buckets/${n}/films/${i}/events`,authenticatePerson:!1}).then(e=>{const i=e.events||[];if(0===i.length)return void(t.innerHTML='<div class="eventive-error">No upcoming showtimes available</div>');const n=function(t){const e={};return t.forEach(t=>{const i=new Date(t.start_time).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});e[i]||(e[i]=[]),e[i].push(t)}),Object.keys(e).forEach(t=>{e[t].sort((t,e)=>new Date(t.start_time)-new Date(e.start_time))}),e}(i),o=Object.entries(n).map(([t,e])=>`\n\t\t\t\t\t\t\t\t<div class="eventive-showtime-date-group">\n\t\t\t\t\t\t\t\t\t<h3 class="eventive-showtime-date">${t}</h3>\n\t\t\t\t\t\t\t\t\t<div class="eventive-showtime-list">\n\t\t\t\t\t\t\t\t\t\t${e.map(t=>`\n\t\t\t\t\t\t\t\t\t\t\t<div class="eventive-showtime-item">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="eventive-showtime-time">${new Date(t.start_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="eventive-button" data-event="${t.id}"></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t`).join("")}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`).join("");t.innerHTML=`<div class="eventive-film-showtimes-container">${o}</div>`,window.Eventive?.rebuild&&window.Eventive.rebuild()}).catch(e=>{console.error("[eventive-film-showtimes] Error fetching showtimes:",e),t.innerHTML='<div class="eventive-error">Unable to load showtimes</div>'}):t.innerHTML='<div class="eventive-error">Missing film or bucket configuration.</div>'}).catch(e=>{console.error("[eventive-film-showtimes] Error fetching post data:",e),t.innerHTML='<div class="eventive-error">Unable to load film data. Please try again later.</div>'})};window.Eventive&&window.Eventive._ready?n():window.Eventive&&"function"==typeof window.Eventive.on?window.Eventive.on("ready",n):setTimeout(()=>{window.Eventive&&"function"==typeof window.Eventive.request?n():(console.error("[eventive-film-showtimes] Eventive API not available"),t.innerHTML='<div class="eventive-error">Eventive API not available</div>')},1e3)})})})();