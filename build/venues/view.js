(()=>{"use strict";var e={n:n=>{var s=n&&n.__esModule?()=>n.default:()=>n;return e.d(s,{a:s}),s},d:(n,s)=>{for(var t in s)e.o(s,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:s[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.element,s=window.wp.apiFetch;var t=e.n(s);const r=window.ReactJSXRuntime,i=({venue:e})=>(0,r.jsxs)("div",{className:"eventive-venue-card",style:{display:"flex",border:"1px solid #ddd",padding:"2%",margin:"15px auto",borderRadius:"4px",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,r.jsx)("div",{style:{flexGrow:6},children:(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{style:{fontSize:"1.2em",color:"#333"},children:e.name}),(0,r.jsx)("br",{}),e.label&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{style:{color:"#666"},children:e.label}),(0,r.jsx)("br",{})]}),(0,r.jsxs)("span",{style:{color:"#555"},children:["Capacity: ",e.default_capacity||"N/A"]}),(0,r.jsx)("br",{}),e.description&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{style:{color:"#666",marginTop:"8px",display:"block"},children:e.description}),(0,r.jsx)("br",{})]}),e.address&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("strong",{style:{fontSize:"0.9em",color:"#555"},children:"Street Address:"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{style:{color:"#666"},children:e.address})]})]})}),e.seatmap_preview_image&&(0,r.jsx)("div",{style:{marginLeft:"20px",flexShrink:0},children:(0,r.jsx)("img",{src:e.seatmap_preview_image,alt:`${e.name} seatmap`,style:{maxWidth:"200px",height:"auto",borderRadius:"4px"}})})]}),a=()=>{const[e,s]=(0,n.useState)([]),[a,d]=(0,n.useState)(!0),[o,l]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{const e=window.EventiveBlockData?.eventBucket||"",n=window.EventiveBlockData?.eventNonce||"";if(!e)return l("Event bucket not configured."),void d(!1);try{const r=new URLSearchParams({bucket_id:e,endpoint:"venues",eventive_nonce:n}),i=await t()({path:`eventive/v1/event_buckets?${r.toString()}`,method:"GET"});i&&Array.isArray(i.venues)?s(i.venues):l("No venues found.")}catch(e){console.error("[eventive-venues] Error fetching venues:",e),l(`Error fetching venues: ${e.message||"Unknown error"}`)}finally{d(!1)}})()},[]),a?(0,r.jsx)("div",{className:"eventive-venues-loading",style:{padding:"20px",textAlign:"center"},children:(0,r.jsx)("p",{children:"Loading venues..."})}):o?(0,r.jsx)("div",{className:"eventive-venues-error",style:{padding:"15px",backgroundColor:"#fef7f1",borderLeft:"4px solid #d63638",color:"#d63638"},children:(0,r.jsx)("p",{children:o})}):0===e.length?(0,r.jsx)("div",{className:"eventive-venues-empty",style:{padding:"20px",textAlign:"center"},children:(0,r.jsx)("p",{children:"No venues found."})}):(0,r.jsx)("div",{className:"eventive-venues-container",children:e.map(e=>(0,r.jsx)(i,{venue:e},e.id||e.name))})};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-venues").forEach(e=>{e.__venuesInitialized||(e.__venuesInitialized=!0,(0,n.createRoot)(e).render((0,r.jsx)(a,{})))})})})();