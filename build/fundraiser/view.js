(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.apiFetch;var n=t.n(e);document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-eventive-fundraiser").forEach(t=>{const e=t.dataset.startTime,r=t.dataset.endTime,a=parseFloat(t.dataset.goalAmount)||1e3;if(!e||!r){const e=t.querySelector("#eventive-donations-container");return void(e&&(e.innerHTML="<p>Error: Start and end dates are required.</p>"))}(async()=>{const o=t.querySelector("#eventive-donations-container"),i=t.querySelector(".eventive-film-loading-text");i&&i.remove();try{const t=new URLSearchParams({start:e,end:r,type:"PAYMENT",eventive_nonce:window.EventiveBlockData.eventNonce}),i=await n()({path:`eventive/v1/ledger?${t.toString()}`,method:"GET"});let s=0;i&&Array.isArray(i.transactions)&&i.transactions.forEach(t=>{"Donation"===t.category?.ref_label&&(s+=parseFloat(t.gross)/100)});const d=Math.min(s/a*100,100).toFixed(2);o&&(o.innerHTML=`\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3>Fundraiser Progress</h3>\n\t\t\t\t\t\t\t<div class="progress-bar-container">\n\t\t\t\t\t\t\t\t<div class="progress-bar" style="--progress-percent: ${d}%; width: ${d}%;"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p>$${s.toFixed(2)} of $${a.toFixed(2)} raised (${d}%)</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`)}catch(t){o&&(o.innerHTML=`<p>Error fetching donations: ${t.message}</p>`)}})()})})})();