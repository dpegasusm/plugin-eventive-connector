(()=>{function e(e,t){try{return t.reduce((e,t)=>e&&void 0!==e[t]?e[t]:void 0,e)}catch(e){return}}function t(e){if(!Array.isArray(e))return"";for(let t=0;t<e.length;t++){const n=e[t];if(n){if("string"==typeof n&&n.trim())return n.trim();if("object"==typeof n&&"string"==typeof n.url&&n.url.trim())return n.url.trim()}}return""}function n(e,t){if(!t||!t.length)return!1;const n=function(e){const t=[];return Array.isArray(e.tags)&&e.tags.forEach(e=>{const n=e&&(e.name||e.title||e.label)?String(e.name||e.title||e.label).toLowerCase():"";n&&t.push(n)}),Array.isArray(e.tag_names)&&e.tag_names.forEach(e=>{const n=e?String(e).toLowerCase():"";n&&t.push(n)}),Array.isArray(e.categories)&&e.categories.forEach(e=>{const n=e?String(e).toLowerCase():"";n&&t.push(n)}),e.category&&t.push(String(e.category).toLowerCase()),Array.from(new Set(t))}(e);return t.some(e=>n.indexOf(e)>-1)}function r(e){return e?String(e).split(",").map(e=>e.trim().toLowerCase().replace(/\s+/g," ")).filter(Boolean):[]}function o(o){if(o.__evtMarqueeInited)return;o.__evtMarqueeInited=!0,function(e){const t=e.querySelector(".eventive-marquee-overlay"),n=e.getAttribute("data-overlay-url")||"",r=parseFloat(e.getAttribute("data-overlay-opacity")||"0.22");t&&(t.style.backgroundImage=n?"url("+n+")":"",t.style.opacity=isNaN(r)?"0.22":String(Math.max(0,Math.min(1,r))));const o=(e.getAttribute("data-caption")||"").trim(),i=e.querySelector(".eventive-marquee-caption-track");if(i)if(o){const e=" â€¢ "+o+" ";let t=o;for(;t.length<200;)t+=e;i.textContent=t}else i.textContent=""}(o);const i=window.EventiveBlockData?.eventBucket||"",a=window.EventiveBlockData?.filmSyncEnabled||!1,c=window.EventiveBlockData?.prettyPermalinks||!1,l=window.EventiveBlockData?.filmDetailUrl||"",s=o.querySelector(".eventive-marquee");if(!s)return;const u=o.getAttribute("data-tag")||"",d=Math.min(parseInt(o.getAttribute("data-number"),10)||5,50),m=(o.getAttribute("data-stills")||"").toLowerCase(),f="true"===m||"1"===m||"yes"===m,g="true"===o.getAttribute("data-year-round"),v=o.getAttribute("data-exclude")||"";function p(){const m=g?"?marquee=true":"";window.Eventive.request({method:"GET",path:"event_buckets/"+encodeURIComponent(i)+"/films"+m,authenticatePerson:!1}).then(function(i){if(!i||!i.films)return;const m=function(e,t,o){const i=r(t),a=r(o);return(e||[]).filter(e=>{const t=!i.length||n(e,i),r=!a.length||!n(e,a);return t&&r})}(i.films,u,v),g=document.createElement("div");g.className="marquee-content",m.slice(0,d).forEach(function(n){const r=function(n,r){const o=[e(n,["images","still_image"]),e(n,["images","still"]),e(n,["images","stillImage"]),e(n,["images","still_url"]),e(n,["images","still","url"]),e(n,["images","still_image","url"]),e(n,["still_image"]),e(n,["still_url"])],i=[e(n,["poster_image"]),e(n,["images","poster_image"]),e(n,["images","poster"]),e(n,["images","poster","url"]),e(n,["poster","url"])];let a="";return r&&(a=t(o)),a||(a=t(i)),a||""}(n,f);g.appendChild(function(e,t,n,r,o,i){if(!t){const e=document.createElement("a");return e.href="#",e.className="poster-slide placeholder",e.setAttribute("aria-hidden","true"),e}const a=String(e||"").toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim();let c;c=r?i.replace(/\/$/,"")+"/"+a:o?i+"?film-id="+encodeURIComponent(n):i+"&film-id="+encodeURIComponent(n);const l=document.createElement("div");l.className="poster-slide",l.style.backgroundImage="url('"+t+"')";const s=document.createElement("a");return s.href=c,s.target="_self",s.appendChild(l),s.addEventListener("click",function(e){e.stopPropagation()}),s}(n.name,r,n.id,a,c,l))});let p=Array.from(g.children),h=210*p.length;const w=s.offsetWidth;for(;h<w;)p.forEach(function(e){g.appendChild(e.cloneNode(!0))}),p=Array.from(g.children),h=210*p.length;var y;y=g,Array.from(y.children).forEach(function(e){y.appendChild(e.cloneNode(!0))});const E=210*g.children.length;g.style.width=E+"px";const A=Math.max(20,Math.min(180,Math.round(E/60)));g.style.animationDuration=A+"s";const b=o.querySelector(".eventive-marquee-caption-track"),C=(o.getAttribute("data-caption-speed")||"match").toLowerCase();let q=A;const S=parseInt(C,10);!isNaN(S)&&S>0&&(q=S),b&&(b.textContent||"").trim().length&&(b.style.animationDuration=q+"s",b.classList.add("caption-scroll")),s.appendChild(g)}).catch(function(e){console.error("[eventive-marquee] fetch error",e)})}if(window.Eventive&&"function"==typeof window.Eventive.ready)window.Eventive.ready(p);else if(window.Eventive&&window.Eventive.on&&"function"==typeof window.Eventive.on)try{window.Eventive.on("ready",p)}catch(e){p()}else{let e=0;!function t(){window.Eventive&&"function"==typeof window.Eventive.request||++e>60?p():setTimeout(t,50)}()}}function i(){document.querySelectorAll(".wp-block-eventive-marquee").forEach(o)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i,{once:!0}):i(),window.jQuery&&window.elementorFrontend&&window.jQuery(window).on("elementor/frontend/init",function(){try{window.elementorFrontend.hooks.addAction("frontend/element_ready/shortcode.default",function(e){if(e&&e[0]){const t=e[0].querySelectorAll(".wp-block-eventive-marquee");t&&t.forEach(o)}})}catch(e){}})})();